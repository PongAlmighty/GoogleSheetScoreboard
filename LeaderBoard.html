<!DOCTYPE html>
<html>

<head>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family='Press Start 2P'">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
	<style>
		.p1 {
			font-family: 'Press Start 2P', cursive;
			color: yellow;
      text-shadow: 3px 3px red;
      text-transform: uppercase;
		}
	</style>
</head>

<body style="" onLoad="loadData();">
	<div style="position:absolute;top:0px;left:0px;width:1920px;height:1080px;background:#00ff00;">
    


	</div>


	<div id="leaderboard1"></div>
	<script src="players.js">
	</script>



	<script>
		function leaderboard(players) {
      const truePlayers = players.filter((f) => f.points > 0);
      return truePlayers.sort((a, b) => b.points - a.points);
    //  return players.sort((a, b) => b.points - a.points);
}

function loadData() {
	let players=[];
	let bots=json['Bot Name'];
	let tokens=json['Tokens'];
	var result="";
	for(i=0; i<99; i++) {
	  var tmp=bots[i];
	  if(tmp != undefined) {
		result+=bots[i]+" "+tokens[i]+"<br>\n";
		players.push({name:bots[i],points:tokens[i]});
	  }
	 }
	players=leaderboard(players);
  var len1=players.length;
	var output="";
	var ytop=110;
  var playerLen;
	var yoff=(700 / len1 );
  // dynamic font size below
  var totalPoints = players.map(item => item.points).reduce((prev, curr) => prev + curr,0);
  
	//yoff = 20;
  
  
  for(i=0; i<len1; i++) {
  //players.foreach(i=>{});
    var textSizePct = ((players[i].points) / totalPoints ) 
    var playerSize = (700 * textSizePct) + 'px'

    if (i==0) {
      output +='"<div class="p1" vertical-align: text-top; text-align: center; align="center" style="position: relative; left: 0px; top:0px; width: 1920px; color: orange; text-shadow: 3px 3px red;font-size:60px; font-weight:600;">' + "HIGH SCORES:" + '</span>';
      output +='</div>';
    }

    output +='"<div class="p1" style="font-size: ' + playerSize + ';width:100%;text-align:left;position:relative;top:'+(playerSize)+'px;left:1px;">';
    output +=(i+1) + ")  " + players[i].name + "   " + players[i].points; // +'</div>';
    
    // output +='"<div class="p1" style="font-size: ' + playerSize + ';width:70%;text-align:left;position:relative;top:'+(playerSize)+'px;left:20rem;">';
    //output +=players[i].name;
    // output +='</div>';
      
    // output +='"<div class="p1" style="font-size: ' + playerSize + ';position:absolute;text-align:right;top:'+(playerSize)+'px;left:80rem;">';
    // output +=players[i].points;
    //output +=totalPoints;
    output +='</div>';

	}
  

	document.getElementById("leaderboard1").innerHTML = output;
}



function update1(){
  loadData();
}
setInterval(update1,2000);

	</script>
</body>

</html>